<!-- Loader section-->

<div id="loader-wrapper">
  <div id="loader"></div>
</div>

<!-- Overlay section -->
<div class="overlay"></div>
<div id="settings_flyouts">
  <aside id="printer_settings_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Printer') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <div id="printer_settings_flyout_content" class="flyout_content">
        {% include "flyouts_lui/setting_flyouts/printer_flyout.jinja2" %}
      </div>

      <ul class="button-area">
        <li class="button secondary-button">
          <a href="#cancel" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span>{{ _('Cancel')}}</span>
          </a>
        </li>
        <li class="button">
          <a href="#save" data-bind="touchClick: function () { flyout.closeFlyoutAccept() }">
            <span>{{ _('Save') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="materials_settings_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Materials') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <!-- ko allowBindings: false -->
      <div id="materials_settings_flyout_content" class="flyout_content">
        {% include "flyouts_lui/setting_flyouts/materials_flyout.jinja2" %}
      </div>
      <!-- /ko -->
      <ul class="button-area">
        <li class="button secondary-button">
          <a href="#cancel" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span>{{ _('Cancel') }}</span>
          </a>
        </li>
        <li class="button">
          <a href="#save" data-bind="touchClick: function () { saveTemperatureProfiles() }">
            <span>{{ _('Save') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  {% include "flyouts_lui/setting_flyouts/wireless_flyout.jinja2" %}
  <aside id="users_settings_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Users') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <!-- ko allowBindings: false -->
      <div id="users_settings_flyout_content" class="flyout_content">
        {% include "flyouts_lui/setting_flyouts/users_flyout.jinja2" %}
      </div>
      <!-- /ko -->
      <ul class="button-area">
        <li class="button">
          <a href="#close" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span>{{ _('Close') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="advanced_settings_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Advanced') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <!-- ko allowBindings: false -->
      <div id="connection_settings_flyout_content" class="flyout_content">
        {% include "flyouts_lui/setting_flyouts/connection_flyout.jinja2" %}
      </div>
      <!-- /ko -->
      <ul class="button-area">
        <li class="button secondary-button">
          <a href="#cancel" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span>{{ _('Cancel') }}</span>
          </a>
        </li>
        <li class="button">
          <a href="#save" data-bind="touchClick: function () { flyout.closeFlyoutAccept() }">
            <span>{{ _('Save') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="update_settings_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Update') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <!-- ko allowBindings: false -->
      <div id="update_settings_flyout_content" class="flyout_content">
        {% include "flyouts_lui/setting_flyouts/update_flyout.jinja2" %}
      </div>
      <!-- /ko -->
      <ul class="button-area">
        <li class="button">
          <a href="#close" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span>{{ _('Close') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="logs_settings_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Logs') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <!-- ko allowBindings: false -->
      <div id="logs_settings_flyout_content" class="flyout_content">
        {% include "flyouts_lui/maintenance_flyouts/logs_flyout.jinja2" %}
      </div>
      <!-- /ko -->
      <ul class="button-area">
        <li class="button">
          <a href="#close" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span>{{ _('Close') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="maintenance_settings_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Maintenance') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <!-- ko allowBindings: false -->
      <div id="maintenance_settings_flyout_content" class="flyout_content">
        {% include "flyouts_lui/maintenance_flyouts/maintenance_flyout.jinja2" %}
      </div>
      <!-- /ko -->
      <ul class="button-area">
        <li class="button">
          <a href="#close" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span>{{ _('Close') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="webcam_settings_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Webcam') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <!-- ko allowBindings: false -->
      <div id="webcam_settings_flyout_content" class="flyout_content">
        {% include "flyouts_lui/setting_flyouts/webcam_flyout.jinja2" %}
      <ul class="button-area">
        <li class="button secondary-button">
          <a href="#cancel" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span>{{ _('Cancel') }}</span>
          </a>
        </li>
        <li class="button">
          <a href="#save" data-bind="touchClick: function () { save() }">
            <span>{{ _('Save') }}</span>
          </a>
        </li>
      </ul>
      </div>
      <!-- /ko -->
    </div>
  </aside>
  <aside id="languages_settings_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Languages') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <div id="languages_settings_flyout_content" class="flyout_content">
        {% include "flyouts_lui/setting_flyouts/languages_flyout.jinja2" %}
      <ul class="button-area">
        <li class="button secondary-button">
          <a href="#cancel" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span>{{ _('Cancel') }}</span>
          </a>
        </li>
        <li class="button">
          <a href="#save" data-bind="touchClick: function () { saveLanguage() }">
            <span>{{ _('Save') }}</span>
          </a>
        </li>
      </ul>
      </div>
    </div>
  </aside>
  {% include "flyouts_lui/setting_flyouts/cloud_flyout.jinja2" %}
</div> <!-- end settings flyouts -->
  <aside id="login_flyout" class="flyout">
    <div class="flyout-header">
    <h4>{{ _('System') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <div id="login_flyout_content">
        {% include "flyouts_lui/login_flyouts/login_flyout.jinja2" %}
      </div>
      <div class="Table">
        <div class="Table-row">
          <div class="Table-item">
            <ul class="button-area">
              <li class="button secondary-button">
                <a href="#save" data-bind="touchClick: function () { flyout.closeFlyout() }">
                  <span>{{ _('Back') }}</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </aside>
  {% if printer_profile["filamentDetection"] %}
  <aside id="filament_detection_flyout" class="flyout">
    <div class="flyout-header bg-yellow">
      <h4>
        <i class="fa fa-exclamation-triangle"></i>{{ _('Filament Detection Warning') }}
      </h4>
    </div>
    <div class="flyout-body">
      <div id="filament_flyout_content">
        {% include "flyouts_lui/filament_flyouts/filament_detection_flyout.jinja2" %}
      </div>
      <ul class="button-area">
        <li class="button failed-button">
          <a href="#save" data-bind="touchClick: function () { cancelFilamentDetection() } ">
            <span data-bind="">{{ _('Cancel Print') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  {% endif %}
  <aside id="filament_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Filament') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <div id="filament_flyout_content">
        {% include "flyouts_lui/filament_flyouts/filament_flyout.jinja2" %}
      </div>
      <ul class="button-area">
        <li class="button failed-button">
          <a href="#abort" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span data-bind="">{{ _('Abort') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="firmware_file_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Firmware files') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <div id="firmware_file_flyout_content">
        {% include "flyouts_lui/file_flyouts/firmware_file_flyout.jinja2" %}
      </div>
      <ul class="button-area">
        <li class="button">
          <a href="#save" data-bind="touchClick: function () { flyout.closeFlyout() }">
            <span data-bind="">{{ _('Close') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="info_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Info') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <div id="info_flyout_content">
        {% include "flyouts_lui/info_flyouts/info_flyout.jinja2" %}
      </div>
      <ul class="button-area">
        <li class="button">
          <a href="#save" data-bind="touchClick: function () { flyout.closeFlyoutAccept() }">
            <span>{{ _('Close') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="zoffset_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Z-offset Wizard') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }"><i class="fa fa-times"></i></span>
    </div>
    <div class="flyout-body">
      <div id="zoffset_flyout_content">
        {% include "flyouts_lui/maintenance_flyouts/zoffset_flyout.jinja2" %}
      </div>
      <ul class="button-area">
        <li class="button">
          <a href="#save" data-bind="touchClick: function () { flyout.closeFlyoutAccept() }">
            <span>{{ _('Close') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="extrudercalibration_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Extruder calibration') }}</h4>
    </div>
    <div class="flyout-body">
      <div id="extrudercalibration_flyout_content">
        {% include "flyouts_lui/maintenance_flyouts/extrudercalibration_flyout.jinja2" %}
      </div>
      <ul class="button-area">
        <li class="button failed-button">
          <a href="#save" data-bind="touchClick: function () { abort() }">
            <span>{{ _('Abort') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="bedcalibration_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Bed calibration') }}</h4>
    </div>
    <div class="flyout-body">
      <div id="bedcalibration_flyout_content">
        {% include "flyouts_lui/maintenance_flyouts/bedcalibration_flyout.jinja2" %}
      </div>
      <ul class="button-area">
        <li class="button failed-button" data-bind="visible: mayAbort">
          <a href="#save" data-bind="touchClick: function () { abort() }, disabled: mayAbort">
            <span>{{ _('Abort') }}</span>
          </a>
        </li>
        <li class="button" data-bind="visible: mayAccept">
          <a href="#save" data-bind="touchClick: function () { accept() }, disabled: mayAccept">
            <span>{{ _('Close') }}</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <aside id="mode_select_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Start print') }}</h4>
      <span class="flyout-close" data-bind="touchClick: function () { flyout.closeFlyout() }">
        <i class="fa fa-times"></i>
      </span>
    </div>
    <div class="flyout-body">
      <div id="mode_select_flyout_content">
        {% include "flyouts_lui/file_flyouts/mode_select_flyout.jinja2" %}
      </div>
    </div>
  </aside>
  <aside id="startup_flyout" class="flyout">
    <div class="flyout-header">
      <h4>{{ _('Printer startup') }}</h4>
    </div>
    <div class="flyout-body">
      <div id="startup_flyout_content">
        {%  if local_addr %}
        {% include "flyouts_lui/info_flyouts/startup_local_flyout.jinja2" %}
        {% else %}
        {% include "flyouts_lui/info_flyouts/startup_remote_flyout.jinja2" %}
        {% endif %}
      </div>
    </div>
  </aside>
  <aside id="printer_error_flyout" class="flyout">
    <div class="flyout-header bg-yellow">
      <h4>
        <i class="fa fa-exclamation-triangle"></i>{{ _('An error has occured') }}
      </h4>
    </div>
    <div class="flyout-body">
      <div id="printer_error_flyout_content">
        {% if local_addr %}
        {% include "flyouts_lui/info_flyouts/printer_error_local_flyout.jinja2" %}
        {% else %}
        {% include "flyouts_lui/info_flyouts/printer_error_remote_flyout.jinja2" %}
        {% endif %}
      </div>
      <div class="printer_error_flyout_footer">
        <div style="margin-bottom: 15px;" data-bind="style: {visibility: printerState.isConnecting() ? 'visible' : 'hidden' }">
          <i class="fa fa-spinner fa-pulse fa-1x fa-fw"></i> Connecting...
        </div>
        {% if local_addr %}
        <ul class="button-area">
          <li class="button ok-button">
            <a href="#" data-bind="click: printerState.restorePrinterConnection">
              <span>
                <i class="fa fa-wrench"></i>{{ _('Restore') }}
              </span>
            </a>
          </li>
          <li class="button failed-button">
            <a href="#" data-bind="touchClick: function () { requestSystemShutdown() }">
              <span>
                <i class="fa fa-power-off"></i>{{ _('Shutdown printer') }}
              </span>
            </a>
          </li>
        </ul>
        {% endif %}
      </div>
    </div>
  </aside>
{% include "flyouts_lui/maintenance_flyouts/head_maintenance_flyout.jinja2" %}
<aside id="confirmation_flyout" class="flyout">
  <div class="flyout-header">
    <h4>{{ _('Confirmation') }}</h4>
  </div>
  <div class="flyout-body">
    <div id="info_flyout_content">
      <div class="Table">
        <div class="Table-row Table-header">
          <div class="Table-item">
            <div data-bind="text: confirmation_title"></div>
          </div>
        </div>
        <div class="Table-row">
          <div class="Table-item">
            <div id="confirmation_text" data-bind="html: confirmation_text"></div>
          </div>
        </div>
        <div class="Table-row">
          <div class="Table-item">
            <div id="confirmation_question" data-bind="html: confirmation_question"></div>
          </div>
        </div>
        <div class="Table-row">
          <div class="Table-item">
            <ul class="button-area">
              <li class="button failed-button">
                <a href="#cancel" data-bind="touchClick: function () { confirmationDeferred.reject() }">
                  <span data-bind="text: confirmation_cancel_text"></span>
                </a>
              </li>
            </ul>
          </div>
          <div class="Table-item">
            <ul class="button-area">
              <li class="button ok-button">
                <a href="#confirm" data-bind="touchClick: function () { confirmationDeferred.resolve() }">
                  <span data-bind="text: confirmation_ok_text"></span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</aside>
<aside id="auto_shutdown_flyout" class="flyout">
  <div class="flyout-header">
    <h4><i class="fa fa-power-off"></i>{{ _('Auto shutdown') }}</h4>
  </div>
  <div class="flyout-body">
    <div id="auto_shutdown_flyout_content">
      {% include "flyouts_lui/info_flyouts/auto_shutdown_flyout.jinja2" %}
    </div>
  </div>
</aside>
<aside id="shutdown_confirmation_flyout" class="flyout">
  <div class="flyout-header">
    <h4>
      <i class="fa fa-power-off"></i>Shutdown
    </h4>
  </div>
  <div class="flyout-body">
    <div id="shutdown_confirmation_flyout_content">
      {% include "flyouts_lui/info_flyouts/shutdown_confirmation_flyout.jinja2" %}
    </div>
  </div>
</aside>
<aside id="changelog_flyout" class="flyout">
  <div class="flyout-header">
    <h4><i class="fa fa-info-circle"></i>{{ _('Changelog') }}</h4>
  </div>
  <div class="flyout-body">
    <div id="changelog_flyout_content">
      {% include "flyouts_lui/info_flyouts/changelog_flyout.jinja2" %}
    </div>
    <ul class="button-area">
      <li class="button">
        <a href="#save" data-bind="touchClick: function () { flyout.closeFlyoutAccept() }">
          <span>{{ _('Ok') }}</span>
        </a>
      </li>
    </ul>
  </div>
</aside>
<aside id="firmware_update_required_flyout" class="flyout">
  <div class="flyout-header bg-yellow">
    <h4>
      <i class="fa fa-exclamation-triangle"></i>Firmware update required
    </h4>
  </div>
  <div class="flyout-body">
    <div id="firmware_update_required_flyout_content">
      {% include "flyouts_lui/info_flyouts/firmware_update_required_flyout.jinja2" %}
    </div>
  </div>
</aside>
<aside id="offline_flyout" class="flyout">
  <div class="flyout-header">
    <h4><i class="fa fa-exclamation-triangle"></i>{{ _('Service Offline') }}</h4>
  </div>
  <div class="flyout-body">
    <div id="offline_flyout_content">
      <div class="Table">
        <div class="Table-row Table-header">
          <div class="Table-item">
            <div id="offline_title"></div>
          </div>
        </div>
        <div class="Table-row">
          <div class="Table-item">
            <div id="offline_text"></div>
          </div>
        </div>
{#      Out for now   
        <div class="Table-row">
          <div class="Table-item">
            <ul class="button-area">
              <li class="button ok-button">
                <a id="#offline_reload">
                  <span>Reload</span>
                </a>
              </li>
            </ul>
          </div>
        </div> #}
      </div>
    </div>
  </div>
</aside>
<div id="warnings_container" style="z-index: 99">
  <div data-bind="template: { name: 'warning-template', foreach: warnings }">
  </div>
  <script type="text/html" id="warning-template">
    <aside class="flyout warning_flyout active">
      <div class="flyout-header bg-yellow">
        <h4>
          <i class="fa fa-exclamation-triangle"></i>{{ _('Warning') }}
        </h4>
      </div>
      <div class="flyout-body">
        <div id="warnings_flyout_content">
          <div class="Table">
            <div class="Table-row Table-header">
              <div class="Table-item">
                <div data-bind="text: warning_title"></div>
              </div>
            </div>
            <div class="Table-row">
              <div class="Table-item">
                <div id="warning_text" data-bind="html: warning_text"></div>
              </div>
            </div>
            <!-- ko if: !blocking -->
            <div class="Table-row">
              <div class="Table-item">
                <ul class="button-area">
                  <li class="button ok-button">
                    <a href="#save" data-bind="touchClick: function () { callback(); $root.closeWarning($data) }">
                      <span>{{ _('Ok') }}</span>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <!-- /ko -->
          </div>
        </div>
      </div>
    </aside>
  </script>
</div>
<div id="infos_container" style="z-index: 98">
  <div data-bind="template: { name: 'info-template', foreach: infos }">
  </div>
  <script type="text/html" id="info-template">
    <aside class="flyout info_flyout active">
      <div class="flyout-header bg-green">
        <h4>
          <i class="fa fa-info"></i>{{ _('Information') }}
        </h4>
      </div>
      <div class="flyout-body">
        <div id="info_flyout_content">
          <div class="Table">
            <div class="Table-row Table-header">
              <div class="Table-item">
                <div data-bind="text: info_title"></div>
              </div>
            </div>
            <div class="Table-row">
              <div class="Table-item">
                <div id="info_text" data-bind="html: info_text"></div>
              </div>
            </div>
            <!-- ko if: !blocking -->
            <div class="Table-row">
              <div class="Table-item">
                <ul class="button-area">
                  <li class="button ok-button">
                    <a href="#save" data-bind="touchClick: function () { callback(); $root.closeInfo($data) }">
                      <span>{{ _('Ok') }}</span>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <!-- /ko -->
          </div>
        </div>
      </div>
    </aside>
  </script>
</div>
